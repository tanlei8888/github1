<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="button" name="" id="btn" value="弹出">
</body>
<script>
    let oBtn = document.getElementById("btn");
    oBtn.addEventListener("click",() =>{
        //调用popup函数,传入实参
        popup(300, 300, "6px solid green", "white", "true", "true");
    })

    function popup(width, height, border, backgroundColor, havemask, dragable){
        //创建两个新元素
        //弹窗
        let oPopup = document.createElement("div");
        // let aInput1 = document.createElement("input");
        // let aInput2 = document.createElement("input");
        // let aInput3 = document.createElement("input")
        // let aBtn = document.createElement("button");
        // oPopup.appendChild(aInput1);
        // oPopup.appendChild(aInput2);
        // oPopup.appendChild(aInput3);
        // oPopup.appendChild(aBtn);
        oPopup.innerHTML = `姓名:<input/><br/>年龄:<input/><br/>薪资:<input/><br/><input type="button" value="提交"/>`
        //遮罩
        let oMask = document.createElement("div");

        //获取页面视窗宽高+兼容
        let bossWidth = document.documentElement.clientWidth || document.body.clientWidth
        let bossHeight = document.documentElement.clientHeight || document.body.clientHeight
        
        //给弹窗添加样式
        oPopup.style.position = "fixed";
        oPopup.style.border = border;
        oPopup.style.width = `${width}px`;
        oPopup.style.height =`${height}px`;
        oPopup.style.backgroundColor = `${backgroundColor}`
        oPopup.style.textAlign = "center"

        //设置弹窗居中
        oPopup.style.left = `${(bossWidth - width) / 2}px`
        oPopup.style.top = `${(bossHeight - height) / 2}px`

        //设置弹窗随视窗居中
        window.addEventListener("resize", () => {
          let bossWidth = document.documentElement.clientWidth || document.body.clientWidth
          let bossHeight = document.documentElement.clientHeight || document.body.clientHeight
          oPopup.style.left = `${(bossWidth - width) / 2}px`
          oPopup.style.top = `${(bossHeight - height) / 2}px`
        })

        // oPopup.setAttribute('class','popup1');
        //给遮罩添加样式
          oMask.style.position = "fixed";
          oMask.style.width = "100%";
          oMask.style.height = "100%";
          oMask.style.left = 0;
          oMask.style.top = 0;
          oMask.style.backgroundColor = "rgba(0, 0, 0, .2)";
        // oMask.setAttribute('class','mask')
        //添加给Document
        document.body.appendChild(oMask);
        document.body.appendChild(oPopup);
        //调用拖曳函数
        mouseE(oPopup);
    }

        //封装拖曳函数
        function mouseE(obj) {
            obj.addEventListener("mousedown",event => {
            //鼠标点击
            let oLeft = event.clientX - obj.offsetLeft;
            let oTop = event.clientY - obj.offsetTop;
            //跟随鼠标移动
            document.onmousemove = function(event){
            let eLeft = event.clientX - oLeft;
            let eTop = event.clientY - oTop;
            obj.style.left = `${eLeft}px`;
            obj.style.top = `${eTop}px`;
            }
        })
            //鼠标松开,鼠标移动时间停止
            document.addEventListener("mouseup",event => {
            document.onmousemove = null;
        })
    }
    

   
</script>
</html>