<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <table>
        <tr>
            <td>姓名</td>
            <td><input type="text" id="username"></td>
        </tr>
        <tr>
            <td>电话号码</td>
            <td><input type="text" id="tel"></td>
        </tr>
        <tr>
            <td>性别</td>
            <td><input type="text" id="gender"></td>
        </tr>
        <tr>
            <td></td>
            <input type="button" value="保存" id="save">
        </tr>
        <tr>
            <td><input type="text" id="findTxt"></td>
            <td><input type="button" value="根据名字检索" id="find"></td>
        </tr>
    </table>
    <div id="result"></div>
</body>
<script>
    let username = document.querySelector("#username")
    let tel = document.querySelector("#tel")
    let gender = document.querySelector("#gender")
    let saveBtn = document.querySelector("#save")
    let findBtn = document.querySelector("#find")
    let findTxt = document.querySelector("#findTxt")
    let result = document.querySelector("#result")
    // console.log(result)
    let arr = [] || JSON.parse(localStorage.getItem("person"));
    let id = arr.length
    saveBtn.addEventListener("click",function(){
        let obj = {
            id,
            username : username.value,
            tel : tel.value,
            gender : gender.value
        }
        arr.push(obj)
        let str = JSON.stringify(arr);
        //localStorage 不能储存对象
        localStorage.setItem("person",str);
        id++
    })
    findBtn.addEventListener("click",function(){
        // findTxt.value = ""
        let str = localStorage.getItem("person");
        let data = JSON.parse(str);
        let flag = false;
        // console.log(data);
            data.map(e => {
            if(e.username === findTxt.value){
            result.innerHTML = `
                <p>名字:${e.username}</p>
                <p>电话:${e.tel}</p>
                <p>性别:${e.gender}</p>
            ` 
            flag = true
            } 
        })
           
        if(!flag){
            result.innerHTML = `查无此人`
        }
        
        
    })
         
        // result.innerHTML = `查无此人`
        
        // findTxt.value = ""
        // let r = data.filter(e => {
        //   return e.username === findTxt.value
        // })
        // // result.innerHTML = `
        // // <p>名字: ${e.username}</p>
        // // <p>电话: ${e.tel}</p>
        // // <p>性别: ${e.gender}</p>
        // // `
        // console.log(r)
        // result.innerHTML = r.length ? `
        // <p>名字: ${r[0].username}</p>
        // <p>电话: ${r[0].tel}</p>
        // <p>性别: ${r[0].gender}</p>
        // ` : "查无此人"
    
</script>

</html>