<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            padding: 0;
            margin: 0;
        }
        .hb{
            width: 100px;
            height: 100px;
            position: absolute;
            top: 0;
            left: 0;
            background-image: url("../hongbao.jpg");
            background-repeat: no-repeat;
            background-size: contain;
        }
       
    </style>
</head>
<body>
</body>
<script>
    /**
       * @param {Number} width 红包的宽度
       * @param {Number} height 红包的高度
       * @param {Number} x 红包起始的x轴的位置
       * @param {Number} y 红包起始的y轴的位置 应该固定0
       * @param {String} backgroundColor 红包的背景颜色
       * @param {Number} time 红包产生的时间
       * @param {Number} speed 红包掉落的速度
       */
    
    
    // function RadBag(width, height, x, y, time, speed) {
    //     this.width = width;
    //     this.height = height;
    //     this.x = x;
    //     this.y = y;
    //     this.time = time;
    //     this.speed = speed;
    //     this.init()
    // }
    // //红包开始
    
    // RadBag.prototype = {
    //     constructor:RadBag,
    //     init:function(){
    //      setInterval(() => {
    //             let oDiv = document.createElement("div")
    //                 oDiv.className = "hb";
    //             let oBody = document.querySelector("body");
    //             oBody.appendChild(oDiv);
    //             if(x > 0 && x < (this.width-100)){
    //                 oDiv.style.left = `${this.x}px`
    //             this.drop()
    //             }
    //         }, this.speed)
    //     },
    // //红包掉落
    //     drop:function(){
    //         this.time =setInterval(() => {
    //             this.remove()
    //             this.y += 10
    //             oDiv.style.top = `${this.y}px`
    //         }, 60);
    //     },
    // //红包消失
    //     remove:function(){
    //         //当红包溢出窗口时 清除定时器 清除div
    //         if(this.height < this.y){
    //                 window.clearInterval(this.time);
    //                 document.body.removeChild(oDiv)
                   
    //             }
    //         }
    //     }
    // debugger
    let bodywidth = document.documentElement.clientWidth;
    let bodyheight = document.documentElement.clientHeight;
    let x = parseInt(Math.random()*bodywidth);
    let y = 0;
    let time;
    let speed = 1000;
    new RadBag (bodywidth,bodyheight,x,y,time,speed);
    


    setInterval(() => {
        //创建div 红包
        let oDiv = document.createElement("div")
        oDiv.className = "hb";
        //获取浏览器窗口的宽和高
        let width = document.documentElement.clientWidth;
        let height = document.documentElement.clientHeight;
        //红包降落的top
        let y = 0;
        //红包出生的位置
        let x = parseInt(Math.random()*width);
        if(x > 0 && x < (width-100)){
            oDiv.style.left = `${x}px`
        }
        //获取body 添加div
        let oBody = document.querySelector("body");
        oBody.appendChild(oDiv);
        //储存定时器
        let time;
        time = setInterval(() => {
            //当红包溢出窗口时 清除定时器 清除div
           if(y >(height-110)){
            clearInterval(time);
            oDiv.parentNode.removeChild(oDiv)
           }
           y += 10
           oDiv.style.top = `${y}px`
        }, 60);
    }, 1000);
</script>
</html>